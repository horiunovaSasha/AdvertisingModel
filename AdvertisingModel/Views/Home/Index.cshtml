@{
    ViewData["Title"] = "Home Page";
}

<!-- Animated -->
<div class="animated fadeIn">
    <div class="row">
        <div class="col-12 widget">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">Advertising Model</h4>
                    <div id="chartdiv" style="height: 600px"></div>
                </div>
            </div>
        </div>
    </div>
  
</div>
<!-- .animated -->
@section Scripts {
    <!--Local Stuff-->
    <script>
        jQuery(document).ready(function ($) {
            "use strict";

        });

        am4core.ready(function () {

            // Themes begin
            am4core.useTheme(am4themes_animated);
            // Themes end

            var chart = am4core.create("chartdiv", am4charts.XYChart);

            $.ajax("/api/Calculations/Calculate?n=101")
                .done(function (response) {
                    var data = [];
                    $(response).each(function (index, elem) {
                        var item = {
                            "t": index * 0.01,
                            "y1": elem[0],
                            "y2": elem[1],
                        };

                        if (index % 5 == 0)
                            item.lineColor = chart.colors.next();

                        data.push(item);
                    });

                    chart.data = data;
                })
                .fail(function response() {
                    console.log(response);
                });           

            var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
            categoryAxis.renderer.grid.template.location = 0;
            categoryAxis.renderer.ticks.template.disabled = true;
            categoryAxis.renderer.line.opacity = 0;
            categoryAxis.renderer.grid.template.disabled = true;
            categoryAxis.renderer.minGridDistance = 40;
            categoryAxis.dataFields.category = "t";
            categoryAxis.startLocation = 0.4;
            categoryAxis.endLocation = 0.6;


            var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
            valueAxis.tooltip.disabled = true;
            valueAxis.renderer.line.opacity = 0;
            valueAxis.renderer.ticks.template.disabled = true;
            valueAxis.min = 0;

            var lineSeries = chart.series.push(new am4charts.LineSeries());
            lineSeries.dataFields.categoryX = "t";
            lineSeries.dataFields.valueY = "y1";
            lineSeries.tooltipText = "y1: {valueY.value}";
            lineSeries.fillOpacity = 0.5;
            lineSeries.strokeWidth = 3;
            lineSeries.propertyFields.stroke = "lineColor";
            lineSeries.propertyFields.fill = "lineColor";

            var lineSeries1 = chart.series.push(new am4charts.LineSeries());
            lineSeries1.dataFields.categoryX = "t";
            lineSeries1.dataFields.valueY = "y2";
            lineSeries1.tooltipText = "y2: {valueY.value}";
            lineSeries1.fillOpacity = 0.5;
            lineSeries1.strokeWidth = 3;
            lineSeries1.propertyFields.stroke = "lineColor";
            lineSeries1.propertyFields.fill = "lineColor";

            chart.cursor = new am4charts.XYCursor();
            chart.cursor.behavior = "panX";
            chart.cursor.lineX.opacity = 0;
            chart.cursor.lineY.opacity = 0;

            chart.scrollbarX = new am4core.Scrollbar();
            chart.scrollbarX.parent = chart.bottomAxesContainer;

        }); // end am4core.ready()
    </script>
}